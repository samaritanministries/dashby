{"version":3,"sources":["../../src/commands/serve.js"],"names":["handler","require","openurl","http","signalExit","module","exports","program","port","open","parseInt","server","createServer","request","response","public","listen","openUrlString","console","log","code","signal","close"],"mappings":";;AAAA;AACA,MAAMA,UAAUC,QAAS,eAAT,CAAhB;;AACA,MAAMC,UAAUD,QAAS,KAAT,CAAhB;;AACA,MAAME,OAAOF,QAAS,MAAT,CAAb;;AACA,MAAMG,aAAaH,QAAS,aAAT,CAAnB;;AAEAI,OAAOC,OAAP,GAAiBC,WAAW;AAAA,MACpBC,IADoB,GACLD,OADK,CACpBC,IADoB;AAAA,MACdC,IADc,GACLF,OADK,CACdE,IADc;AAE1BD,SAAO,OAAOA,IAAP,KAAiB,QAAjB,GAA2BE,SAASF,IAAT,EAAe,EAAf,CAA3B,GAAgDA,IAAvD;AAEA,MAAIG,SAASR,KAAKS,YAAL,CAAkB,CAACC,OAAD,EAAUC,QAAV,KAC7Bd,QAAQa,OAAR,EAAiBC,QAAjB,EAA2B;AACzBC,YAAS;AADgB,GAA3B,CADW,CAAb;AAMAJ,SAAOK,MAAP,CAAcR,IAAd,EAAoB,MAAM;AACxB,QAAIS,gBAAiB,mBAAD,GAAsBT,IAA1C;AACAU,YAAQC,GAAR,CAAa,0BAAb,EAAwCF,aAAxC;;AACA,QAAIR,IAAJ,EAAU;AACR,UAAIQ,gBAAiB,mBAAD,GAAsBT,IAA1C;AACAU,cAAQC,GAAR,CAAa,oBAAb;AACAjB,cAAQe,aAAR;AACD;AACF,GARD;AAUAb,aAAW,CAACgB,IAAD,EAAOC,MAAP,KAAkB;AAC3BV,WAAOW,KAAP;AACD,GAFD;AAGD,CAvBD","sourcesContent":["/* @flow weak */\nconst handler = require(`serve-handler`)\nconst openurl = require(`opn`)\nconst http = require(`http`)\nconst signalExit = require(`signal-exit`)\n\nmodule.exports = program => {\n  let { port, open } = program\n  port = typeof port === `string` ? parseInt(port, 10) : port\n\n  let server = http.createServer((request, response) =>\n    handler(request, response, {\n      public: `public`,\n    })\n  )\n\n  server.listen(port, () => {\n    let openUrlString = `http://localhost:` + port\n    console.log(`gatsby serve running at:`, openUrlString)\n    if (open) {\n      let openUrlString = `http://localhost:` + port\n      console.log(`Opening browser...`)\n      openurl(openUrlString)\n    }\n  })\n\n  signalExit((code, signal) => {\n    server.close()\n  })\n}\n"],"file":"serve.js"}