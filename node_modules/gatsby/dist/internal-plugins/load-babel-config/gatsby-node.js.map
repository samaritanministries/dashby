{"version":3,"sources":["../../../src/internal-plugins/load-babel-config/gatsby-node.js"],"names":["fs","require","apiRunnerNode","withBasePath","exports","onPreBootstrap","store","getState","program","directory","browserslist","directoryPath","stage","babelrcState","babelrc","babelState","JSON","stringify","stages","writeFile"],"mappings":";;;;;;AAEA,MAAMA,KAAKC,QAAS,UAAT,CAAX;;AAEA,MAAMC,gBAAgBD,QAAS,6BAAT,CAAtB;;iBACyBA,QAAS,kBAAT,C;MAAjBE,Y,YAAAA,Y;;AAERC,QAAQC,cAAR;AAAA;AAAA;AAAA,6CAAyB,WAAO;AAAEC;AAAF,GAAP,EAAqB;AAAA,kCACRA,MAAMC,QAAN,GAAiBC,OADT;AAAA,UACpCC,SADoC,yBACpCA,SADoC;AAAA,UACzBC,YADyB,yBACzBA,YADyB;AAE5C,UAAMC,gBAAgBR,aAAaM,SAAb,CAAtB;AAEA,UAAMP,cAAe,qBAAf,EAAqC;AACzCU,aAAQ;AADiC,KAArC,CAAN;AAGA,UAAMV,cAAe,qBAAf,EAAqC;AACzCU,aAAQ;AADiC,KAArC,CAAN;AAGA,UAAMV,cAAe,qBAAf,EAAqC;AACzCU,aAAQ;AADiC,KAArC,CAAN;AAGA,UAAMV,cAAe,qBAAf,EAAqC;AACzCU,aAAQ;AADiC,KAArC,CAAN;AAGA,UAAMC,eAAeP,MAAMC,QAAN,GAAiBO,OAAtC;AACAD,iBAAaH,YAAb,GAA4BA,YAA5B;AACA,UAAMK,aAAaC,KAAKC,SAAL,CAAeJ,aAAaK,MAA5B,EAAoC,IAApC,EAA0C,CAA1C,CAAnB;AACA,UAAMlB,GAAGmB,SAAH,CAAaR,cAAe,wBAAf,CAAb,EAAsDI,UAAtD,CAAN;AACD,GApBD;;AAAA;AAAA;AAAA;AAAA","sourcesContent":["/* @flow */\n\nconst fs = require(`fs-extra`)\n\nconst apiRunnerNode = require(`../../utils/api-runner-node`)\nconst { withBasePath } = require(`../../utils/path`)\n\nexports.onPreBootstrap = async ({ store }) => {\n  const { directory, browserslist } = store.getState().program\n  const directoryPath = withBasePath(directory)\n\n  await apiRunnerNode(`onCreateBabelConfig`, {\n    stage: `develop`,\n  })\n  await apiRunnerNode(`onCreateBabelConfig`, {\n    stage: `develop-html`,\n  })\n  await apiRunnerNode(`onCreateBabelConfig`, {\n    stage: `build-javascript`,\n  })\n  await apiRunnerNode(`onCreateBabelConfig`, {\n    stage: `build-html`,\n  })\n  const babelrcState = store.getState().babelrc\n  babelrcState.browserslist = browserslist\n  const babelState = JSON.stringify(babelrcState.stages, null, 4)\n  await fs.writeFile(directoryPath(`.cache/babelState.json`), babelState)\n}\n"],"file":"gatsby-node.js"}