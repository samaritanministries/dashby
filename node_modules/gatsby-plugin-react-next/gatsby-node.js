"use strict";

var resolve = require("resolve");

var rootReact = resolve.sync("react", {
  basedir: process.cwd(),
  preserveSymlinks: true
});

var React = require(rootReact);

exports.onCreateWebpackConfig = function (_ref) {
  var actions = _ref.actions,
      plugins = _ref.plugins;
  if (React.version.slice(0, 2) === "16") return;
  actions.setWebpackConfig({
    resolve: {
      alias: {
        react: "gatsby-plugin-react-next/node_modules/react",
        "react-dom": "gatsby-plugin-react-next/node_modules/react-dom"
      }
    }
  });
};